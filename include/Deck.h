#pragma once
#include <QString>
#include <QList>
#include "Card.h"

/**
 * @brief Класс, представляющий колоду учебных карточек
 *
 * Класс Deck реализует коллекцию карточек (Card) для системы интервального повторения.
 * Предоставляет функциональность для управления карточками, получения статистики
 * и фильтрации карточек, готовых к повторению.
 *
 * @note Все методы получения данных являются константными и не модифицируют объект
 * @see Card
 *
 * @author bozvan
 * @version 1.0
 */
class Deck {
private:
    int id;                     ///< Уникальный идентификатор колоды
    QString name;               ///< Название колоды
    QList<Card> cards;          ///< Список карточек в колоде

public:
    /**
     * @brief Конструктор по умолчанию
     *
     * Создает пустую колоду с нулевым идентификатором и пустым названием.
     */
    Deck();

    /**
     * @brief Деструктор
     *
     * Деструктор по умолчанию, так как все члены имеют тривиальные деструкторы.
     */
    ~Deck() = default;

    // =============== ГЕТТЕРЫ ===============

    /**
     * @brief Получить идентификатор колоды
     * @return Уникальный идентификатор колоды
     */
    int getId() const;

    /**
     * @brief Получить название колоды
     * @return Название колоды
     */
    QString getName() const;

    /**
     * @brief Получить список всех карточек в колоде
     * @return QList<Card> Копия списка карточек
     * @note Возвращает копию списка. Для модификации карточек используйте сеттеры.
     */
    QList<Card> getCards() const;

    // =============== СЕТТЕРЫ ===============

    /**
     * @brief Установить идентификатор колоды
     * @param id Новый идентификатор колоды
     */
    void setId(int id);

    /**
     * @brief Установить название колоды
     * @param name Новое название колоды
     */
    void setName(QString name);

    /**
     * @brief Установить список карточек
     * @param cards Новый список карточек для колоды
     * @note Заменяет все существующие карточки в колоде
     */
    void setCards(QList<Card> cards);

    // =============== ФУНКЦИОНАЛ ПОВТОРЕНИЯ ===============

    /**
     * @brief Получить карточки для повторения сегодня
     *
     * Возвращает список карточек, которые готовы к повторению на текущую дату.
     * Карточка считается "готовой к повторению", если:
     * - Дата следующего повторения (nextReview) наступила или прошла
     * - Или дата следующего повторения не установлена (невалидная QDateTime)
     *
     * @return QList<Card> Список карточек, требующих повторения
     * @see Card::getNextReview()
     * @see getDueCount()
     */
    QList<Card> getDueCards() const;

    /**
     * @brief Получить количество карточек для повторения сегодня
     *
     * Более эффективная альтернатива getDueCards().size(), так как
     * не создает копии карточек, а только подсчитывает их количество.
     *
     * @return int Количество карточек, готовых к повторению
     * @see getDueCards()
     */
    int getDueCount() const;
};
